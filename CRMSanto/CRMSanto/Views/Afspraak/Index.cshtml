@model CRMSanto.ViewModels.AfspraakPM

@{
    ViewBag.Title = "Afspraken";
}

<ul class="breadcrumb">
    <li class="active">Afspraken</li>
</ul>

@using (Html.BeginForm("Index", "Afspraak", FormMethod.Post, new { @id = "frmVanaf" }))
{
    <div class="row">
        <div class="col s12">
            <label for="vanaf">Startdatum</label>
            <div class="input-group search">
                <input type="date" id="vanaf" name="vanaf" class="form-control" value="@ViewBag.Vanaf">
                <span class="input-group-btn">
                    <button class="btn-floating waves-effect waves-light santo-brown-bg inline-btn" name="submit" type="submit" tabindex="-1">
                        <i class="mdi-action-search"></i>
                    </button>
                </span>
            </div>
        </div>
    </div>
}
            <div class="row">
                <div class="col s12">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.Afspraken[0].DatumTijdstip)
                                </th>
                                <th>
                                    Klant
                                </th>
                                <th>
                                    Masseur
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Afspraken[0].SoortAfspraak)
                                </th>
                                <td>
                                    Arrangement
                                </td>
                                <td>
                                    Extra
                                </td>
                                <td>
                                    Verplaatsing
                                </td>
                                <th>
                                    @Html.DisplayNameFor(model => model.Afspraken[0].SoloDuo)
                                </th>
                            </tr>
                            @foreach (var item in Model.Afspraken)
                            {
                                var style = "";
                                if (item.Masseur.ID == 8) { style = "success"; };
                                if (item.Masseur.ID == 9) { style = "warning"; };
                                if (item.Masseur.ID == 10) { style = "info"; };
                                <tr class='@style'>
                                    <td>
                                        @item.DatumTijdstip.Date.ToShortDateString() <br />
                                        @item.DatumTijdstip.ToString("HH:mm") - @item.DatumTijdstip.AddMinutes(item.Duur).ToString("HH:mm")
                                    </td>
                                    <td>
                                        <div class="row vertical-align klant-home">
                                            <div class="col-md-3">
                                                <a href="Klant/Edit/@Html.DisplayFor(modelItem => item.Klant.ID)"><img src="@Html.GetPhotoURL(Html.DisplayFor(modelItem => item.Klant.Foto).ToString())" alt="" class="profilepic shadow-z-1" /></a>
                                            </div>
                                            <div class="col-md-9">
                                                <a href="Klant/Edit/@Html.DisplayFor(modelItem => item.Klant.ID)">@Html.DisplayFor(modelItem => item.Klant.Naam) @Html.DisplayFor(modelItem => item.Klant.Voornaam)</a>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Masseur.Naam)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.SoortAfspraak.Naam)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Arrangement.Naam)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Extra.Naam)
                                    </td>
                                    <td>
                                        @if (item.Verplaatsing)
                                        {
                                            <button class="btn btn-fab-mini btn-raised btn-sm btn-material-pink" onclick="routeLink('@Html.DisplayFor(modelItem => item.Klant.Adres.Straat)', '@Html.DisplayFor(modelItem => item.Klant.Adres.Nummer)', '@Html.DisplayFor(modelItem => item.Klant.Adres.Postcode)', '@Html.DisplayFor(modelItem => item.Klant.Adres.Gemeente)');return false;"><i class="mdi-maps-navigation"></i></button>
                                        }
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.SoloDuo)
                                    </td>
                                    <td>
                                        <nobr>
                                            <a href='@Url.Action("Edit","Afspraak",new { id = item.ID })' class="btn-floating waves-effect waves-light orange inline-btn"><i class="mdi-editor-mode-edit"></i></a>
                                            <a href='@Url.Action("Annuleer", "Afspraak", new { id = item.ID })' class="btn-floating waves-effect waves-light red inline-btn"><i class="mdi-content-remove-circle"></i></a>
                                        </nobr>
                                    </td>
                                </tr>
                            }
                        </table>
                    </div>
                </div>
            </div>

            <div class="fixed-action-btn">
                <a href='@Url.Action("New", "Afspraak")' onclick="showProgress();" class="btn-floating btn-large waves-effect waves-light green"><i class="mdi-content-add"></i></a>
            </div>

<script>
    if (datefield.type != "date") { //if browser doesn't support input type="date", initialize date picker widget:
        jQuery(function ($) { //on document.ready
            $('#vanaf').datepicker({ dateFormat: 'dd-mm-yyyy' });
        })
    }
</script>